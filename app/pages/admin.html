<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Panel de Administración | UrbanVogue</title>
    <link rel="shortcut icon" href="/img/logotype/logo_urbanvogue_black.svg" type="image/x-icon">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Iconos -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <!-- CSS propios -->
    <link rel="stylesheet" href="../css/navbar.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/footer.css">
</head>

<body>

    <!-- NAVBAR reutilizable -->
    <div id="navbarContainer"></div>

    <main class="container my-5">
        <h1 class="mb-4">Panel de Administración</h1>

        <!-- Mensajes generales -->
        <div id="adminError" class="alert alert-danger d-none"></div>
        <div id="adminSuccess" class="alert alert-success d-none"></div>

        <!-- Pestañas (paneles) -->
        <ul class="nav nav-tabs mb-4" id="adminTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="tab-categorias" data-bs-toggle="tab"
                    data-bs-target="#panelCategorias" type="button" role="tab">
                    Categorías
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab-productos" data-bs-toggle="tab" data-bs-target="#panelProductos"
                    type="button" role="tab">
                    Productos
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab-usuarios" data-bs-toggle="tab" data-bs-target="#panelUsuarios"
                    type="button" role="tab">
                    Usuarios
                </button>
            </li>
        </ul>

        <div class="tab-content" id="adminTabContent">
            <!-- ===================== PANEL CATEGORÍAS ===================== -->
            <div class="tab-pane fade show active" id="panelCategorias" role="tabpanel"
                aria-labelledby="tab-categorias">

                <div class="row">
                    <!-- Formulario crear/editar categoría -->
                    <div class="col-md-4">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 id="catFormTitle" class="card-title mb-3">Crear nueva categoría</h5>

                                <form id="categoriaForm">
                                    <!-- Campo oculto para ID cuando estemos editando -->
                                    <input type="hidden" id="categoriaId">

                                    <div class="mb-3">
                                        <label for="categoriaNombre" class="form-label">Nombre</label>
                                        <input type="text" class="form-control" id="categoriaNombre"
                                            placeholder="Camisetas, Sudaderas, Accesorios..." required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="categoriaDescripcion" class="form-label">Descripción</label>
                                        <textarea class="form-control" id="categoriaDescripcion" rows="3"
                                            placeholder="Descripción de la categoría"></textarea>
                                    </div>

                                    <button type="submit" class="btn btn-dark w-100">
                                        Guardar categoría
                                    </button>

                                    <button type="button" id="btnCancelarEdicion"
                                        class="btn btn-outline-secondary w-100 mt-2 d-none">
                                        Cancelar edición
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Tabla de categorías -->
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Listado de categorías</h5>

                                <div class="table-responsive">
                                    <table class="table table-sm align-middle">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Nombre</th>
                                                <th>Descripción</th>
                                                <th class="text-end">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="categoriasTableBody">
                                            <!-- Aquí se insertan filas dinámicamente -->
                                        </tbody>
                                    </table>
                                </div>

                                <p id="categoriasVacio" class="text-muted d-none">
                                    No hay categorías registradas todavía.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===================== PANEL PRODUCTOS ===================== -->
            <div class="tab-pane fade" id="panelProductos" role="tabpanel" aria-labelledby="tab-productos">
                <div class="row">
                    <!-- Formulario crear/editar producto -->
                    <div class="col-md-5">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 id="prodFormTitle" class="card-title mb-3">Crear nuevo producto</h5>

                                <form id="productoForm">
                                    <!-- ID oculto para modo edición -->
                                    <input type="hidden" id="productoId">

                                    <div class="mb-3">
                                        <label for="productoNombre" class="form-label">Nombre</label>
                                        <input type="text" class="form-control" id="productoNombre"
                                            placeholder="Nombre del producto" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="productoDescripcion" class="form-label">Descripción</label>
                                        <textarea class="form-control" id="productoDescripcion" rows="3"
                                            placeholder="Descripción del producto"></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="productoPrecio" class="form-label">Precio (€)</label>
                                        <input type="number" step="0.01" min="0" class="form-control"
                                            id="productoPrecio" placeholder="19.99" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="productoStock" class="form-label">Stock</label>
                                        <input type="number" min="0" class="form-control" id="productoStock"
                                            placeholder="Cantidad disponible" value="0">
                                    </div>

                                    <div class="mb-3">
                                        <label for="productoTalla" class="form-label">Talla</label>
                                        <input type="text" class="form-control" id="productoTalla"
                                            placeholder="S, M, L, XL...">
                                    </div>

                                    <div class="mb-3">
                                        <label for="productoColor" class="form-label">Color</label>
                                        <input type="text" class="form-control" id="productoColor"
                                            placeholder="Negro, Blanco, Azul...">
                                    </div>

                                    <div class="mb-3">
                                        <label for="productoImagen" class="form-label">Imagen (URL o nombre de
                                            archivo)</label>
                                        <input type="text" class="form-control" id="productoImagen"
                                            placeholder="/img/clothes/TH-shirt.jpg">
                                    </div>

                                    <div class="mb-3">
                                        <label for="productoCategoria" class="form-label">Categoría</label>
                                        <select class="form-select" id="productoCategoria">
                                            <!-- Se llenará dinámicamente desde JS con categorías -->
                                        </select>
                                    </div>

                                    <button type="submit" class="btn btn-dark w-100">
                                        Guardar producto
                                    </button>

                                    <button type="button" id="btnCancelarEdicionProducto"
                                        class="btn btn-outline-secondary w-100 mt-2 d-none">
                                        Cancelar edición
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Tabla de productos -->
                    <div class="col-md-7">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Listado de productos</h5>

                                <div class="table-responsive">
                                    <table class="table table-sm align-middle">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Nombre</th>
                                                <th>Precio</th>
                                                <th>Stock</th>
                                                <th>Categoría</th>
                                                <th class="text-end">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="productosTableBody">
                                            <!-- Se rellena desde JS -->
                                        </tbody>
                                    </table>
                                </div>

                                <p id="productosVacio" class="text-muted d-none">
                                    No hay productos registrados todavía.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- ===================== PANEL USUARIOS ===================== -->
            <div class="tab-pane fade" id="panelUsuarios" role="tabpanel" aria-labelledby="tab-usuarios">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Usuarios registrados</h5>
                        <p class="text-muted">
                            Desde aquí puedes ver todos los usuarios y cambiar su rol entre
                            <strong>cliente</strong> y <strong>admin</strong>.
                            No se permite borrar usuarios por seguridad.
                        </p>

                        <div class="table-responsive">
                            <table class="table table-sm align-middle">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nombre</th>
                                        <th>Email</th>
                                        <th>Rol</th>
                                        <th>Fecha registro</th>
                                        <th class="text-end">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="usuariosTableBody">
                                    <!-- Se rellena desde JS -->
                                </tbody>
                            </table>
                        </div>

                        <p id="usuariosVacio" class="text-muted d-none">
                            No hay usuarios registrados todavía.
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- FOOTER reutilizable -->
    <div id="footerContainer"></div>

    <!-- JS Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Scripts propios -->
    <script src="/js/auth.js"></script>
    <script src="/js/navbarLoader.js"></script>
    <script src="/js/footerLoader.js"></script>
    <script src="/js/admin.js"></script>

</body>

</html>